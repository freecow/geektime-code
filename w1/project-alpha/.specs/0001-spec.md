# Project Alpha - ç¥¨åŠ¡æ ‡ç­¾ç®¡ç†ç³»ç»Ÿ

## æ–‡æ¡£ä¿¡æ¯
- **é¡¹ç›®åç§°**: Project Alpha
- **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-12-11
- **æ–‡æ¡£ç±»å‹**: éœ€æ±‚ä¸è®¾è®¡è§„æ ¼è¯´æ˜

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹
Project Alpha æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç¥¨åŠ¡ç®¡ç†å·¥å…·ï¼Œé€šè¿‡æ ‡ç­¾ç³»ç»Ÿæ¥ç»„ç»‡å’Œåˆ†ç±»ä»»åŠ¡ç¥¨æ®ï¼ˆTicketsï¼‰ã€‚è¯¥ç³»ç»Ÿæ— éœ€ç”¨æˆ·è®¤è¯ï¼Œä¸“æ³¨äºæä¾›ç®€æ´é«˜æ•ˆçš„ç¥¨åŠ¡ç®¡ç†ä½“éªŒã€‚

### 1.2 æŠ€æœ¯æ ˆ
- **åç«¯**: FastAPI (Python)
- **æ•°æ®åº“**: PostgreSQL
- **å‰ç«¯**: TypeScript + Vite + Tailwind CSS + Shadcn UI
- **APIé€šä¿¡**: RESTful API

### 1.3 æ ¸å¿ƒç‰¹æ€§
- ç¥¨åŠ¡çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€å®ŒæˆçŠ¶æ€åˆ‡æ¢ï¼‰
- çµæ´»çš„æ ‡ç­¾ç³»ç»Ÿ
- åŸºäºæ ‡ç­¾çš„è¿‡æ»¤æŸ¥çœ‹
- æ ‡é¢˜æœç´¢åŠŸèƒ½
- æ— éœ€ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

---

## 2. åŠŸèƒ½éœ€æ±‚

### 2.1 ç¥¨åŠ¡ç®¡ç†

#### 2.1.1 åˆ›å»ºç¥¨åŠ¡
- **åŠŸèƒ½æè¿°**: ç”¨æˆ·å¯ä»¥åˆ›å»ºæ–°çš„ç¥¨åŠ¡
- **å¿…å¡«å­—æ®µ**:
  - æ ‡é¢˜ï¼ˆTitleï¼‰: å­—ç¬¦ä¸²ï¼Œæœ€å¤§é•¿åº¦200å­—ç¬¦
- **å¯é€‰å­—æ®µ**:
  - æè¿°ï¼ˆDescriptionï¼‰: æ–‡æœ¬ï¼Œæ”¯æŒé•¿æ–‡æœ¬
  - æ ‡ç­¾ï¼ˆTagsï¼‰: å¤šä¸ªæ ‡ç­¾çš„é›†åˆ
- **ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ**:
  - ID: å”¯ä¸€æ ‡è¯†ç¬¦
  - åˆ›å»ºæ—¶é—´ï¼ˆCreated Atï¼‰
  - æ›´æ–°æ—¶é—´ï¼ˆUpdated Atï¼‰
  - çŠ¶æ€ï¼ˆStatusï¼‰: é»˜è®¤ä¸º"æœªå®Œæˆ"

#### 2.1.2 ç¼–è¾‘ç¥¨åŠ¡
- **åŠŸèƒ½æè¿°**: ç”¨æˆ·å¯ä»¥ä¿®æ”¹ç°æœ‰ç¥¨åŠ¡çš„ä¿¡æ¯
- **å¯ç¼–è¾‘å­—æ®µ**:
  - æ ‡é¢˜
  - æè¿°
- **ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°**:
  - æ›´æ–°æ—¶é—´

#### 2.1.3 åˆ é™¤ç¥¨åŠ¡
- **åŠŸèƒ½æè¿°**: æ°¸ä¹…åˆ é™¤ç¥¨åŠ¡åŠå…¶å…³è”çš„æ ‡ç­¾å…³ç³»
- **æ“ä½œæ–¹å¼**: ç‰©ç†åˆ é™¤ï¼ˆçœŸå®åˆ é™¤æ•°æ®åº“è®°å½•ï¼‰
- **ç¡®è®¤æœºåˆ¶**: å‰ç«¯æä¾›äºŒæ¬¡ç¡®è®¤æç¤º

#### 2.1.4 å®Œæˆ/å–æ¶ˆå®Œæˆç¥¨åŠ¡
- **åŠŸèƒ½æè¿°**: åˆ‡æ¢ç¥¨åŠ¡çš„å®ŒæˆçŠ¶æ€
- **çŠ¶æ€ç±»å‹**:
  - æœªå®Œæˆï¼ˆpendingï¼‰
  - å·²å®Œæˆï¼ˆcompletedï¼‰
- **æ“ä½œæ–¹å¼**: çŠ¶æ€åˆ‡æ¢toggle
- **ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°**: æ›´æ–°æ—¶é—´

### 2.2 æ ‡ç­¾ç®¡ç†

#### 2.2.1 æ·»åŠ æ ‡ç­¾åˆ°ç¥¨åŠ¡
- **åŠŸèƒ½æè¿°**: ä¸ºç¥¨åŠ¡æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾
- **æ ‡ç­¾ç‰¹æ€§**:
  - æ ‡ç­¾åç§°å”¯ä¸€
  - è‡ªåŠ¨åˆ›å»ºï¼šå¦‚æœæ ‡ç­¾ä¸å­˜åœ¨ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ›å»º
  - å¤šæ ‡ç­¾æ”¯æŒï¼šä¸€ä¸ªç¥¨åŠ¡å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾
  - é˜²é‡å¤ï¼šåŒä¸€æ ‡ç­¾ä¸èƒ½é‡å¤æ·»åŠ åˆ°åŒä¸€ç¥¨åŠ¡

#### 2.2.2 ä»ç¥¨åŠ¡ç§»é™¤æ ‡ç­¾
- **åŠŸèƒ½æè¿°**: ä»ç¥¨åŠ¡ä¸­ç§»é™¤æŒ‡å®šæ ‡ç­¾
- **ç³»ç»Ÿè¡Œä¸º**:
  - ä»…åˆ é™¤å…³è”å…³ç³»ï¼Œä¸åˆ é™¤æ ‡ç­¾æœ¬èº«
  - å¦‚æœæ ‡ç­¾ä¸å†è¢«ä»»ä½•ç¥¨åŠ¡ä½¿ç”¨ï¼Œå¯é€‰æ‹©æ€§ä¿ç•™æˆ–æ¸…ç†

#### 2.2.3 æ ‡ç­¾é¢œè‰²
- **åŠŸèƒ½æè¿°**: æ¯ä¸ªæ ‡ç­¾å¯ä»¥æœ‰è‡ªå®šä¹‰é¢œè‰²ç”¨äºè§†è§‰åŒºåˆ†
- **é¢œè‰²æ–¹æ¡ˆ**: é¢„è®¾8-10ç§é¢œè‰²ï¼Œåˆ›å»ºæ ‡ç­¾æ—¶éšæœºåˆ†é…æˆ–æ‰‹åŠ¨é€‰æ‹©

### 2.3 æŸ¥è¯¢ä¸è¿‡æ»¤

#### 2.3.1 æŒ‰æ ‡ç­¾è¿‡æ»¤ç¥¨åŠ¡
- **åŠŸèƒ½æè¿°**: ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾æ¥è¿‡æ»¤ç¥¨åŠ¡åˆ—è¡¨
- **è¿‡æ»¤é€»è¾‘**:
  - å•æ ‡ç­¾ï¼šæ˜¾ç¤ºåŒ…å«è¯¥æ ‡ç­¾çš„æ‰€æœ‰ç¥¨åŠ¡
  - å¤šæ ‡ç­¾ï¼šæ˜¾ç¤ºåŒæ—¶åŒ…å«æ‰€æœ‰é€‰ä¸­æ ‡ç­¾çš„ç¥¨åŠ¡ï¼ˆANDé€»è¾‘ï¼‰
- **ç‰¹æ®Šè§†å›¾**:
  - "å…¨éƒ¨ç¥¨åŠ¡"ï¼šæ˜¾ç¤ºæ‰€æœ‰ç¥¨åŠ¡
  - "æ— æ ‡ç­¾"ï¼šæ˜¾ç¤ºæ²¡æœ‰ä»»ä½•æ ‡ç­¾çš„ç¥¨åŠ¡

#### 2.3.2 æŒ‰æ ‡é¢˜æœç´¢
- **åŠŸèƒ½æè¿°**: æ ¹æ®æ ‡é¢˜å…³é”®è¯æœç´¢ç¥¨åŠ¡
- **æœç´¢ç‰¹æ€§**:
  - æ¨¡ç³ŠåŒ¹é…
  - å¤§å°å†™ä¸æ•æ„Ÿ
  - å®æ—¶æœç´¢ï¼ˆè¾“å…¥å»¶è¿Ÿ500msåè§¦å‘ï¼‰
- **æœç´¢èŒƒå›´**: ä»…æœç´¢ç¥¨åŠ¡æ ‡é¢˜å­—æ®µ

#### 2.3.3 çŠ¶æ€è¿‡æ»¤
- **åŠŸèƒ½æè¿°**: æŒ‰å®ŒæˆçŠ¶æ€è¿‡æ»¤ç¥¨åŠ¡
- **è¿‡æ»¤é€‰é¡¹**:
  - å…¨éƒ¨
  - ä»…æœªå®Œæˆ
  - ä»…å·²å®Œæˆ

---

## 3. æ•°æ®æ¨¡å‹è®¾è®¡

### 3.1 æ•°æ®è¡¨ç»“æ„

#### 3.1.1 Tickets è¡¨
```sql
CREATE TABLE tickets (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    description TEXT,
    status VARCHAR(20) NOT NULL DEFAULT 'pending',
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    CONSTRAINT check_status CHECK (status IN ('pending', 'completed'))
);

CREATE INDEX idx_tickets_status ON tickets(status);
CREATE INDEX idx_tickets_title ON tickets(title);
CREATE INDEX idx_tickets_created_at ON tickets(created_at DESC);
```

**å­—æ®µè¯´æ˜**:
- `id`: ä¸»é”®ï¼Œè‡ªå¢æ•´æ•°
- `title`: ç¥¨åŠ¡æ ‡é¢˜ï¼Œéç©ºï¼Œæœ€å¤§200å­—ç¬¦
- `description`: ç¥¨åŠ¡æè¿°ï¼Œå¯é€‰ï¼Œé•¿æ–‡æœ¬
- `status`: çŠ¶æ€ï¼Œæšä¸¾å€¼ï¼ˆpending/completedï¼‰ï¼Œé»˜è®¤pending
- `created_at`: åˆ›å»ºæ—¶é—´ï¼Œå¸¦æ—¶åŒºçš„æ—¶é—´æˆ³
- `updated_at`: æ›´æ–°æ—¶é—´ï¼Œå¸¦æ—¶åŒºçš„æ—¶é—´æˆ³

#### 3.1.2 Tags è¡¨
```sql
CREATE TABLE tags (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    color VARCHAR(7) NOT NULL DEFAULT '#3B82F6',
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

CREATE UNIQUE INDEX idx_tags_name ON tags(name);
```

**å­—æ®µè¯´æ˜**:
- `id`: ä¸»é”®ï¼Œè‡ªå¢æ•´æ•°
- `name`: æ ‡ç­¾åç§°ï¼Œéç©ºï¼Œå”¯ä¸€
- `color`: æ ‡ç­¾é¢œè‰²ï¼Œåå…­è¿›åˆ¶é¢œè‰²ä»£ç ï¼ˆå¦‚ #3B82F6ï¼‰
- `created_at`: åˆ›å»ºæ—¶é—´

#### 3.1.3 Ticket_Tags å…³è”è¡¨
```sql
CREATE TABLE ticket_tags (
    ticket_id INTEGER NOT NULL,
    tag_id INTEGER NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    PRIMARY KEY (ticket_id, tag_id),
    FOREIGN KEY (ticket_id) REFERENCES tickets(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE
);

CREATE INDEX idx_ticket_tags_tag_id ON ticket_tags(tag_id);
CREATE INDEX idx_ticket_tags_ticket_id ON ticket_tags(ticket_id);
```

**å­—æ®µè¯´æ˜**:
- `ticket_id`: ç¥¨åŠ¡IDï¼Œå¤–é”®
- `tag_id`: æ ‡ç­¾IDï¼Œå¤–é”®
- `created_at`: å…³è”åˆ›å»ºæ—¶é—´
- å¤åˆä¸»é”®ï¼š(ticket_id, tag_id) ç¡®ä¿å”¯ä¸€æ€§
- çº§è”åˆ é™¤ï¼šåˆ é™¤ç¥¨åŠ¡æˆ–æ ‡ç­¾æ—¶è‡ªåŠ¨åˆ é™¤å…³è”å…³ç³»

### 3.2 æ•°æ®æ¨¡å‹ERå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Tickets     â”‚         â”‚   Ticket_Tags    â”‚         â”‚      Tags       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”¤ ticket_id (FK)   â”‚         â”‚ id (PK)         â”‚
â”‚ title           â”‚         â”‚ tag_id (FK)      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ name (UNIQUE)   â”‚
â”‚ description     â”‚         â”‚ created_at       â”‚         â”‚ color           â”‚
â”‚ status          â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ created_at      â”‚
â”‚ created_at      â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ updated_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…³ç³»: Tickets *â”€â”€â”€â”€â”€â”€* Tags (å¤šå¯¹å¤š)
```

---

## 4. API æ¥å£è®¾è®¡

### 4.1 åŸºç¡€é…ç½®
- **Base URL**: `/api/v1`
- **Content-Type**: `application/json`
- **æ—¥æœŸæ ¼å¼**: ISO 8601 (ä¾‹: `2025-12-11T10:30:00Z`)

### 4.2 ç¥¨åŠ¡æ¥å£

#### 4.2.1 è·å–ç¥¨åŠ¡åˆ—è¡¨
```
GET /api/v1/tickets
```

**æŸ¥è¯¢å‚æ•°**:
- `status`: (å¯é€‰) `pending` | `completed` | `all` - é»˜è®¤ `all`
- `tag_ids`: (å¯é€‰) é€—å·åˆ†éš”çš„æ ‡ç­¾IDåˆ—è¡¨ï¼Œä¾‹: `1,2,3`
- `search`: (å¯é€‰) æœç´¢å…³é”®è¯
- `page`: (å¯é€‰) é¡µç ï¼Œé»˜è®¤ 1
- `page_size`: (å¯é€‰) æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 50ï¼Œæœ€å¤§ 100

**å“åº”ç¤ºä¾‹**:
```json
{
  "data": [
    {
      "id": 1,
      "title": "ä¿®å¤ç™»å½•é¡µé¢æ ·å¼é—®é¢˜",
      "description": "ç™»å½•æŒ‰é’®åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤ºä¸æ­£å¸¸",
      "status": "pending",
      "tags": [
        {
          "id": 1,
          "name": "bug",
          "color": "#EF4444"
        },
        {
          "id": 2,
          "name": "frontend",
          "color": "#3B82F6"
        }
      ],
      "created_at": "2025-12-10T10:00:00Z",
      "updated_at": "2025-12-11T08:30:00Z"
    }
  ],
  "total": 45,
  "page": 1,
  "page_size": 50,
  "total_pages": 1
}
```

#### 4.2.2 è·å–å•ä¸ªç¥¨åŠ¡è¯¦æƒ…
```
GET /api/v1/tickets/{ticket_id}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "id": 1,
  "title": "ä¿®å¤ç™»å½•é¡µé¢æ ·å¼é—®é¢˜",
  "description": "ç™»å½•æŒ‰é’®åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤ºä¸æ­£å¸¸",
  "status": "pending",
  "tags": [
    {
      "id": 1,
      "name": "bug",
      "color": "#EF4444"
    }
  ],
  "created_at": "2025-12-10T10:00:00Z",
  "updated_at": "2025-12-11T08:30:00Z"
}
```

#### 4.2.3 åˆ›å»ºç¥¨åŠ¡
```
POST /api/v1/tickets
```

**è¯·æ±‚ä½“**:
```json
{
  "title": "å®ç°ç”¨æˆ·å¯¼å‡ºåŠŸèƒ½",
  "description": "å…è®¸ç”¨æˆ·å¯¼å‡ºæ•°æ®ä¸ºCSVæ ¼å¼",
  "tag_ids": [3, 5]
}
```

**å“åº”ç¤ºä¾‹** (201 Created):
```json
{
  "id": 2,
  "title": "å®ç°ç”¨æˆ·å¯¼å‡ºåŠŸèƒ½",
  "description": "å…è®¸ç”¨æˆ·å¯¼å‡ºæ•°æ®ä¸ºCSVæ ¼å¼",
  "status": "pending",
  "tags": [
    {
      "id": 3,
      "name": "feature",
      "color": "#10B981"
    },
    {
      "id": 5,
      "name": "backend",
      "color": "#8B5CF6"
    }
  ],
  "created_at": "2025-12-11T10:30:00Z",
  "updated_at": "2025-12-11T10:30:00Z"
}
```

#### 4.2.4 æ›´æ–°ç¥¨åŠ¡
```
PUT /api/v1/tickets/{ticket_id}
```

**è¯·æ±‚ä½“**:
```json
{
  "title": "å®ç°ç”¨æˆ·å¯¼å‡ºåŠŸèƒ½ï¼ˆæ›´æ–°ï¼‰",
  "description": "å…è®¸ç”¨æˆ·å¯¼å‡ºæ•°æ®ä¸ºCSVå’ŒExcelæ ¼å¼"
}
```

**å“åº”ç¤ºä¾‹** (200 OK): è¿”å›æ›´æ–°åçš„å®Œæ•´ç¥¨åŠ¡å¯¹è±¡

#### 4.2.5 åˆ é™¤ç¥¨åŠ¡
```
DELETE /api/v1/tickets/{ticket_id}
```

**å“åº”**: 204 No Content

#### 4.2.6 åˆ‡æ¢ç¥¨åŠ¡å®ŒæˆçŠ¶æ€
```
PATCH /api/v1/tickets/{ticket_id}/toggle-status
```

**å“åº”ç¤ºä¾‹** (200 OK):
```json
{
  "id": 1,
  "status": "completed",
  "updated_at": "2025-12-11T10:35:00Z"
}
```

### 4.3 æ ‡ç­¾æ¥å£

#### 4.3.1 è·å–æ‰€æœ‰æ ‡ç­¾
```
GET /api/v1/tags
```

**æŸ¥è¯¢å‚æ•°**:
- `with_count`: (å¯é€‰) boolean - æ˜¯å¦åŒ…å«æ¯ä¸ªæ ‡ç­¾å…³è”çš„ç¥¨åŠ¡æ•°é‡ï¼Œé»˜è®¤ false

**å“åº”ç¤ºä¾‹**:
```json
{
  "data": [
    {
      "id": 1,
      "name": "bug",
      "color": "#EF4444",
      "ticket_count": 12,
      "created_at": "2025-12-01T10:00:00Z"
    },
    {
      "id": 2,
      "name": "feature",
      "color": "#10B981",
      "ticket_count": 8,
      "created_at": "2025-12-01T10:05:00Z"
    }
  ],
  "total": 2
}
```

#### 4.3.2 åˆ›å»ºæ ‡ç­¾
```
POST /api/v1/tags
```

**è¯·æ±‚ä½“**:
```json
{
  "name": "urgent",
  "color": "#F59E0B"
}
```

**å“åº”ç¤ºä¾‹** (201 Created):
```json
{
  "id": 6,
  "name": "urgent",
  "color": "#F59E0B",
  "created_at": "2025-12-11T10:40:00Z"
}
```

#### 4.3.3 æ›´æ–°æ ‡ç­¾
```
PUT /api/v1/tags/{tag_id}
```

**è¯·æ±‚ä½“**:
```json
{
  "name": "critical",
  "color": "#DC2626"
}
```

#### 4.3.4 åˆ é™¤æ ‡ç­¾
```
DELETE /api/v1/tags/{tag_id}
```

**å“åº”**: 204 No Content
**è¯´æ˜**: åˆ é™¤æ ‡ç­¾ä¼šåŒæ—¶åˆ é™¤æ‰€æœ‰ç›¸å…³çš„ç¥¨åŠ¡-æ ‡ç­¾å…³è”

### 4.4 ç¥¨åŠ¡-æ ‡ç­¾å…³è”æ¥å£

#### 4.4.1 ä¸ºç¥¨åŠ¡æ·»åŠ æ ‡ç­¾
```
POST /api/v1/tickets/{ticket_id}/tags
```

**è¯·æ±‚ä½“**:
```json
{
  "tag_ids": [1, 2, 3]
}
```

æˆ–åˆ›å»ºæ–°æ ‡ç­¾å¹¶å…³è”:
```json
{
  "tag_names": [
    {
      "name": "new-tag",
      "color": "#6366F1"
    }
  ]
}
```

**å“åº”ç¤ºä¾‹** (200 OK): è¿”å›æ›´æ–°åçš„å®Œæ•´ç¥¨åŠ¡å¯¹è±¡

#### 4.4.2 ä»ç¥¨åŠ¡ç§»é™¤æ ‡ç­¾
```
DELETE /api/v1/tickets/{ticket_id}/tags/{tag_id}
```

**å“åº”**: 204 No Content

### 4.5 é”™è¯¯å“åº”æ ¼å¼

æ‰€æœ‰é”™è¯¯å“åº”éµå¾ªç»Ÿä¸€æ ¼å¼:

```json
{
  "error": {
    "code": "RESOURCE_NOT_FOUND",
    "message": "ç¥¨åŠ¡ä¸å­˜åœ¨",
    "details": {
      "ticket_id": 999
    }
  }
}
```

**å¸¸è§é”™è¯¯ç **:
- `400` - è¯·æ±‚å‚æ•°é”™è¯¯
- `404` - èµ„æºä¸å­˜åœ¨
- `409` - èµ„æºå†²çªï¼ˆå¦‚æ ‡ç­¾åç§°é‡å¤ï¼‰
- `422` - éªŒè¯å¤±è´¥
- `500` - æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

## 5. å‰ç«¯è®¾è®¡

### 5.1 æŠ€æœ¯æ¶æ„

#### 5.1.1 æŠ€æœ¯é€‰å‹
- **æ¡†æ¶**: React 18+ with TypeScript
- **æ„å»ºå·¥å…·**: Vite 5+
- **æ ·å¼**: Tailwind CSS 3+
- **ç»„ä»¶åº“**: Shadcn UI
- **çŠ¶æ€ç®¡ç†**: React Context + Hooks / Zustandï¼ˆå¯é€‰ï¼‰
- **HTTPå®¢æˆ·ç«¯**: Axios æˆ– Fetch API
- **è·¯ç”±**: React Router 6+ (å¯é€‰ï¼Œè§†å•é¡µéœ€æ±‚è€Œå®š)
- **è¡¨å•å¤„ç†**: React Hook Form
- **æ—¥æœŸå¤„ç†**: date-fns

#### 5.1.2 ç›®å½•ç»“æ„
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/           # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/              # Shadcn UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ tickets/         # ç¥¨åŠ¡ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ tags/            # æ ‡ç­¾ç›¸å…³ç»„ä»¶
â”‚   â”‚   â””â”€â”€ common/          # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ api/                 # API è°ƒç”¨å°è£…
â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ types/               # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ App.tsx              # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ main.tsx             # å…¥å£æ–‡ä»¶
â”œâ”€â”€ public/
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tailwind.config.js
```

### 5.2 é¡µé¢å¸ƒå±€

#### 5.2.1 ä¸»ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Project Alpha - ç¥¨åŠ¡ç®¡ç†                      [+ æ–°å»ºç¥¨åŠ¡]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ä¾§è¾¹æ  - æ ‡ç­¾ç­›é€‰       â”‚  â”‚   ä¸»å†…å®¹åŒº - ç¥¨åŠ¡åˆ—è¡¨      â”‚â”‚
â”‚  â”‚                          â”‚  â”‚                            â”‚â”‚
â”‚  â”‚  ğŸ” æœç´¢æ ‡ç­¾...          â”‚  â”‚  ğŸ” æœç´¢ç¥¨åŠ¡æ ‡é¢˜...        â”‚â”‚
â”‚  â”‚                          â”‚  â”‚                            â”‚â”‚
â”‚  â”‚  â˜‘ å…¨éƒ¨ç¥¨åŠ¡ (45)        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â˜ æ— æ ‡ç­¾ (3)           â”‚  â”‚  â”‚ â˜ ä¿®å¤ç™»å½•é¡µé¢æ ·å¼é—®é¢˜â”‚ â”‚â”‚
â”‚  â”‚                          â”‚  â”‚  â”‚   ğŸ· bug  ğŸ· frontend â”‚ â”‚â”‚
â”‚  â”‚  æ ‡ç­¾åˆ—è¡¨ï¼š              â”‚  â”‚  â”‚   2025-12-11         â”‚ â”‚â”‚
â”‚  â”‚  â˜ ğŸ· bug (12)          â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚  â˜ ğŸ· feature (8)       â”‚  â”‚                            â”‚â”‚
â”‚  â”‚  â˜ ğŸ· frontend (15)     â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â˜ ğŸ· backend (10)      â”‚  â”‚  â”‚ â˜‘ å®ç°ç”¨æˆ·å¯¼å‡ºåŠŸèƒ½    â”‚ â”‚â”‚
â”‚  â”‚  â˜ ğŸ· urgent (5)        â”‚  â”‚  â”‚   ğŸ· feature          â”‚ â”‚â”‚
â”‚  â”‚                          â”‚  â”‚  â”‚   2025-12-10         â”‚ â”‚â”‚
â”‚  â”‚  [+ æ–°å»ºæ ‡ç­¾]           â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                          â”‚  â”‚                            â”‚â”‚
â”‚  â”‚  çŠ¶æ€ç­›é€‰ï¼š              â”‚  â”‚  åˆ†é¡µ: â† 1 2 3 â†’          â”‚â”‚
â”‚  â”‚  â—‹ å…¨éƒ¨                 â”‚  â”‚                            â”‚â”‚
â”‚  â”‚  â— æœªå®Œæˆ               â”‚  â”‚                            â”‚â”‚
â”‚  â”‚  â—‹ å·²å®Œæˆ               â”‚  â”‚                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 5.3.1 TicketCard ç»„ä»¶
**åŠŸèƒ½**: æ˜¾ç¤ºå•ä¸ªç¥¨åŠ¡å¡ç‰‡
**Props**:
```typescript
interface TicketCardProps {
  ticket: Ticket;
  onToggleStatus: (ticketId: number) => void;
  onEdit: (ticket: Ticket) => void;
  onDelete: (ticketId: number) => void;
  onRemoveTag: (ticketId: number, tagId: number) => void;
}
```

**çŠ¶æ€æ˜¾ç¤º**:
- æœªå®Œæˆï¼šç©ºå¿ƒå¤é€‰æ¡†
- å·²å®Œæˆï¼šå®å¿ƒå¤é€‰æ¡†ï¼Œæ ‡é¢˜å¸¦åˆ é™¤çº¿ï¼Œç°è‰²èƒŒæ™¯

#### 5.3.2 TicketList ç»„ä»¶
**åŠŸèƒ½**: æ˜¾ç¤ºç¥¨åŠ¡åˆ—è¡¨å¹¶å¤„ç†åˆ†é¡µ
**Props**:
```typescript
interface TicketListProps {
  filters: TicketFilters;
  onTicketUpdate: () => void;
}
```

#### 5.3.3 TagFilter ç»„ä»¶
**åŠŸèƒ½**: ä¾§è¾¹æ æ ‡ç­¾ç­›é€‰
**Props**:
```typescript
interface TagFilterProps {
  tags: Tag[];
  selectedTagIds: number[];
  onTagSelect: (tagIds: number[]) => void;
}
```

#### 5.3.4 TicketDialog ç»„ä»¶
**åŠŸèƒ½**: åˆ›å»º/ç¼–è¾‘ç¥¨åŠ¡çš„å¯¹è¯æ¡†
**Props**:
```typescript
interface TicketDialogProps {
  open: boolean;
  ticket?: Ticket; // undefined è¡¨ç¤ºåˆ›å»ºï¼Œæœ‰å€¼è¡¨ç¤ºç¼–è¾‘
  onClose: () => void;
  onSave: (data: TicketFormData) => Promise<void>;
}
```

#### 5.3.5 TagBadge ç»„ä»¶
**åŠŸèƒ½**: æ ‡ç­¾å¾½ç« æ˜¾ç¤º
**Props**:
```typescript
interface TagBadgeProps {
  tag: Tag;
  removable?: boolean;
  onRemove?: (tagId: number) => void;
}
```

**æ ·å¼**: ä½¿ç”¨æ ‡ç­¾çš„ color å±æ€§ä½œä¸ºèƒŒæ™¯è‰²

#### 5.3.6 SearchBar ç»„ä»¶
**åŠŸèƒ½**: æœç´¢è¾“å…¥æ¡†
**Props**:
```typescript
interface SearchBarProps {
  placeholder: string;
  value: string;
  onChange: (value: string) => void;
  debounceMs?: number; // é»˜è®¤ 500ms
}
```

### 5.4 äº¤äº’æµç¨‹

#### 5.4.1 åˆ›å»ºç¥¨åŠ¡æµç¨‹
1. ç”¨æˆ·ç‚¹å‡»"æ–°å»ºç¥¨åŠ¡"æŒ‰é’®
2. æ‰“å¼€å¯¹è¯æ¡†ï¼Œæ˜¾ç¤ºè¡¨å•ï¼ˆæ ‡é¢˜ã€æè¿°ã€æ ‡ç­¾é€‰æ‹©å™¨ï¼‰
3. æ ‡ç­¾é€‰æ‹©å™¨æ”¯æŒï¼š
   - ä»ç°æœ‰æ ‡ç­¾åˆ—è¡¨é€‰æ‹©ï¼ˆå¤šé€‰ï¼‰
   - åˆ›å»ºæ–°æ ‡ç­¾ï¼ˆè¾“å…¥åç§°ï¼Œé€‰æ‹©é¢œè‰²ï¼‰
4. ç”¨æˆ·å¡«å†™ä¿¡æ¯åç‚¹å‡»"åˆ›å»º"
5. å‘é€ POST è¯·æ±‚åˆ°åç«¯
6. æˆåŠŸåå…³é—­å¯¹è¯æ¡†ï¼Œåˆ·æ–°ç¥¨åŠ¡åˆ—è¡¨ï¼Œæ˜¾ç¤ºæˆåŠŸæç¤º

#### 5.4.2 ç¼–è¾‘ç¥¨åŠ¡æµç¨‹
1. ç”¨æˆ·ç‚¹å‡»ç¥¨åŠ¡å¡ç‰‡çš„ç¼–è¾‘å›¾æ ‡
2. æ‰“å¼€å¯¹è¯æ¡†ï¼Œé¢„å¡«å……å½“å‰ç¥¨åŠ¡ä¿¡æ¯
3. ç”¨æˆ·ä¿®æ”¹ä¿¡æ¯
4. ç‚¹å‡»"ä¿å­˜"å‘é€ PUT è¯·æ±‚
5. æˆåŠŸåå…³é—­å¯¹è¯æ¡†ï¼Œæ›´æ–°åˆ—è¡¨ï¼Œæ˜¾ç¤ºæˆåŠŸæç¤º

#### 5.4.3 åˆ é™¤ç¥¨åŠ¡æµç¨‹
1. ç”¨æˆ·ç‚¹å‡»ç¥¨åŠ¡å¡ç‰‡çš„åˆ é™¤å›¾æ ‡
2. æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ï¼š"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç¥¨åŠ¡å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"
3. ç”¨æˆ·ç¡®è®¤åå‘é€ DELETE è¯·æ±‚
4. æˆåŠŸåä»åˆ—è¡¨ä¸­ç§»é™¤è¯¥ç¥¨åŠ¡ï¼Œæ˜¾ç¤ºæˆåŠŸæç¤º

#### 5.4.4 åˆ‡æ¢å®ŒæˆçŠ¶æ€æµç¨‹
1. ç”¨æˆ·ç‚¹å‡»ç¥¨åŠ¡å¡ç‰‡çš„å¤é€‰æ¡†
2. å‘é€ PATCH è¯·æ±‚åˆ‡æ¢çŠ¶æ€
3. ç«‹å³æ›´æ–°UIæ˜¾ç¤ºï¼ˆä¹è§‚æ›´æ–°ï¼‰
4. å¦‚æœå¤±è´¥åˆ™å›æ»šUIçŠ¶æ€

#### 5.4.5 æ ‡ç­¾ç­›é€‰æµç¨‹
1. ç”¨æˆ·åœ¨ä¾§è¾¹æ é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾
2. æ›´æ–°URLæŸ¥è¯¢å‚æ•°ï¼ˆå¦‚æœä½¿ç”¨è·¯ç”±ï¼‰
3. å‘é€ GET è¯·æ±‚è·å–è¿‡æ»¤åçš„ç¥¨åŠ¡åˆ—è¡¨
4. æ›´æ–°ä¸»å†…å®¹åŒºæ˜¾ç¤º

#### 5.4.6 æœç´¢æµç¨‹
1. ç”¨æˆ·åœ¨æœç´¢æ¡†è¾“å…¥å…³é”®è¯
2. 500ms å»¶è¿Ÿåè§¦å‘æœç´¢
3. å‘é€ GET è¯·æ±‚ï¼ˆåŒ…å« search å‚æ•°ï¼‰
4. æ›´æ–°ç¥¨åŠ¡åˆ—è¡¨æ˜¾ç¤º
5. æ˜¾ç¤ºæœç´¢ç»“æœæ•°é‡ï¼š"æ‰¾åˆ° 5 ä¸ªç»“æœ"

### 5.5 å“åº”å¼è®¾è®¡

#### ç§»åŠ¨ç«¯é€‚é…ï¼ˆ< 768pxï¼‰
- ä¾§è¾¹æ æŠ˜å ä¸ºåº•éƒ¨æŠ½å±‰æˆ–é¡¶éƒ¨ä¸‹æ‹‰èœå•
- ç¥¨åŠ¡å¡ç‰‡å…¨å®½æ˜¾ç¤º
- æ“ä½œæŒ‰é’®è°ƒæ•´ä¸ºå›¾æ ‡æŒ‰é’®
- æœç´¢æ¡†å¯æŠ˜å 

#### å¹³æ¿ç«¯ï¼ˆ768px - 1024pxï¼‰
- ä¾§è¾¹æ å®½åº¦ç¼©å°
- ç¥¨åŠ¡åˆ—è¡¨åŒåˆ—å¸ƒå±€

#### æ¡Œé¢ç«¯ï¼ˆ> 1024pxï¼‰
- æ ‡å‡†ä¸‰æ å¸ƒå±€
- ç¥¨åŠ¡åˆ—è¡¨å¯é€‰ç½‘æ ¼æˆ–åˆ—è¡¨è§†å›¾

### 5.6 UI/UX å¢å¼º

#### 5.6.1 åŠ è½½çŠ¶æ€
- éª¨æ¶å±ï¼ˆSkeletonï¼‰æ˜¾ç¤ºåŠ è½½ä¸­çš„ç¥¨åŠ¡åˆ—è¡¨
- æŒ‰é’®åŠ è½½çŠ¶æ€ï¼ˆåŠ è½½åŠ¨ç”» + ç¦ç”¨ï¼‰
- é¡µé¢çº§åŠ è½½æŒ‡ç¤ºå™¨

#### 5.6.2 ç©ºçŠ¶æ€
- æ— ç¥¨åŠ¡æ—¶æ˜¾ç¤ºï¼š"æš‚æ— ç¥¨åŠ¡ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®åˆ›å»ºç¬¬ä¸€ä¸ªç¥¨åŠ¡"
- æœç´¢æ— ç»“æœï¼š"æœªæ‰¾åˆ°åŒ¹é…çš„ç¥¨åŠ¡ï¼Œè¯•è¯•å…¶ä»–å…³é”®è¯"
- æ ‡ç­¾ç­›é€‰æ— ç»“æœï¼š"è¯¥æ ‡ç­¾ä¸‹æš‚æ— ç¥¨åŠ¡"

#### 5.6.3 é”™è¯¯å¤„ç†
- Toast æ¶ˆæ¯æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
- ç½‘ç»œé”™è¯¯æ—¶æ˜¾ç¤ºé‡è¯•æŒ‰é’®
- è¡¨å•éªŒè¯é”™è¯¯å³æ—¶æ˜¾ç¤º

#### 5.6.4 æˆåŠŸåé¦ˆ
- æ“ä½œæˆåŠŸåæ˜¾ç¤º Toast æ¶ˆæ¯
- ç»¿è‰²å¤é€‰æ ‡è®°åŠ¨ç”»
- åˆ—è¡¨é¡¹æ·¡å…¥æ·¡å‡ºåŠ¨ç”»

#### 5.6.5 è¾…åŠ©åŠŸèƒ½
- é”®ç›˜å¯¼èˆªæ”¯æŒ
- ARIA æ ‡ç­¾
- é«˜å¯¹æ¯”åº¦æ¨¡å¼æ”¯æŒ
- ç„¦ç‚¹ç®¡ç†

---

## 6. åç«¯æ¶æ„è®¾è®¡

### 6.1 é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py              # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database.py          # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ models/              # SQLAlchemy æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ ticket.py
â”‚   â”‚   â”œâ”€â”€ tag.py
â”‚   â”‚   â””â”€â”€ ticket_tag.py
â”‚   â”œâ”€â”€ schemas/             # Pydantic æ¨¡å‹ï¼ˆè¯·æ±‚/å“åº”ï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ ticket.py
â”‚   â”‚   â””â”€â”€ tag.py
â”‚   â”œâ”€â”€ api/                 # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ tickets.py
â”‚   â”‚   â”œâ”€â”€ tags.py
â”‚   â”‚   â””â”€â”€ deps.py          # ä¾èµ–æ³¨å…¥
â”‚   â”œâ”€â”€ services/            # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ ticket_service.py
â”‚   â”‚   â””â”€â”€ tag_service.py
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ __init__.py
â”œâ”€â”€ alembic/                 # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ versions/
â”‚   â””â”€â”€ env.py
â”œâ”€â”€ tests/                   # æµ‹è¯•
â”‚   â”œâ”€â”€ test_tickets.py
â”‚   â””â”€â”€ test_tags.py
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md
```

### 6.2 æ ¸å¿ƒä¾èµ–

```txt
fastapi>=0.109.0
uvicorn[standard]>=0.27.0
sqlalchemy>=2.0.25
psycopg2-binary>=2.9.9
alembic>=1.13.1
pydantic>=2.5.0
pydantic-settings>=2.1.0
python-dotenv>=1.0.0
```

### 6.3 SQLAlchemy æ¨¡å‹å®šä¹‰

#### 6.3.1 Ticket æ¨¡å‹
```python
from sqlalchemy import Column, Integer, String, Text, Enum, DateTime
from sqlalchemy.orm import relationship
from datetime import datetime
import enum

class TicketStatus(str, enum.Enum):
    PENDING = "pending"
    COMPLETED = "completed"

class Ticket(Base):
    __tablename__ = "tickets"
    
    id = Column(Integer, primary_key=True, index=True)
    title = Column(String(200), nullable=False, index=True)
    description = Column(Text, nullable=True)
    status = Column(Enum(TicketStatus), default=TicketStatus.PENDING, nullable=False)
    created_at = Column(DateTime(timezone=True), default=datetime.utcnow, nullable=False)
    updated_at = Column(DateTime(timezone=True), default=datetime.utcnow, onupdate=datetime.utcnow, nullable=False)
    
    # å…³ç³»
    tags = relationship("Tag", secondary="ticket_tags", back_populates="tickets")
```

#### 6.3.2 Tag æ¨¡å‹
```python
from sqlalchemy import Column, Integer, String, DateTime
from sqlalchemy.orm import relationship
from datetime import datetime

class Tag(Base):
    __tablename__ = "tags"
    
    id = Column(Integer, primary_key=True, index=True)
    name = Column(String(50), unique=True, nullable=False, index=True)
    color = Column(String(7), default="#3B82F6", nullable=False)
    created_at = Column(DateTime(timezone=True), default=datetime.utcnow, nullable=False)
    
    # å…³ç³»
    tickets = relationship("Ticket", secondary="ticket_tags", back_populates="tags")
```

#### 6.3.3 TicketTag å…³è”è¡¨
```python
from sqlalchemy import Column, Integer, ForeignKey, DateTime, Table
from datetime import datetime

ticket_tags = Table(
    'ticket_tags',
    Base.metadata,
    Column('ticket_id', Integer, ForeignKey('tickets.id', ondelete='CASCADE'), primary_key=True),
    Column('tag_id', Integer, ForeignKey('tags.id', ondelete='CASCADE'), primary_key=True),
    Column('created_at', DateTime(timezone=True), default=datetime.utcnow, nullable=False)
)
```

### 6.4 Pydantic Schema å®šä¹‰

#### 6.4.1 Ticket Schemas
```python
from pydantic import BaseModel, Field
from datetime import datetime
from typing import List, Optional

class TagBase(BaseModel):
    name: str
    color: str

class TagResponse(TagBase):
    id: int
    created_at: datetime
    
    class Config:
        from_attributes = True

class TicketBase(BaseModel):
    title: str = Field(..., max_length=200)
    description: Optional[str] = None

class TicketCreate(TicketBase):
    tag_ids: Optional[List[int]] = []

class TicketUpdate(BaseModel):
    title: Optional[str] = Field(None, max_length=200)
    description: Optional[str] = None

class TicketResponse(TicketBase):
    id: int
    status: str
    tags: List[TagResponse]
    created_at: datetime
    updated_at: datetime
    
    class Config:
        from_attributes = True

class TicketListResponse(BaseModel):
    data: List[TicketResponse]
    total: int
    page: int
    page_size: int
    total_pages: int
```

### 6.5 Service å±‚è®¾è®¡

#### 6.5.1 TicketService
```python
from sqlalchemy.orm import Session
from typing import List, Optional

class TicketService:
    @staticmethod
    def get_tickets(
        db: Session,
        status: Optional[str] = None,
        tag_ids: Optional[List[int]] = None,
        search: Optional[str] = None,
        skip: int = 0,
        limit: int = 50
    ) -> List[Ticket]:
        # å®ç°ç­›é€‰é€»è¾‘
        pass
    
    @staticmethod
    def get_ticket(db: Session, ticket_id: int) -> Optional[Ticket]:
        pass
    
    @staticmethod
    def create_ticket(db: Session, ticket_data: TicketCreate) -> Ticket:
        pass
    
    @staticmethod
    def update_ticket(db: Session, ticket_id: int, ticket_data: TicketUpdate) -> Ticket:
        pass
    
    @staticmethod
    def delete_ticket(db: Session, ticket_id: int) -> bool:
        pass
    
    @staticmethod
    def toggle_status(db: Session, ticket_id: int) -> Ticket:
        pass
    
    @staticmethod
    def add_tags(db: Session, ticket_id: int, tag_ids: List[int]) -> Ticket:
        pass
    
    @staticmethod
    def remove_tag(db: Session, ticket_id: int, tag_id: int) -> bool:
        pass
```

### 6.6 ä¸­é—´ä»¶ä¸é…ç½®

#### 6.6.1 CORS é…ç½®
```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:5173"],  # Vite é»˜è®¤ç«¯å£
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

#### 6.6.2 ç¯å¢ƒå˜é‡é…ç½®
```python
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    DATABASE_URL: str = "postgresql://user:password@localhost:5432/project_alpha"
    DEBUG: bool = False
    
    class Config:
        env_file = ".env"
```

---

## 7. å¼€å‘ä¸éƒ¨ç½²

### 7.1 å¼€å‘ç¯å¢ƒè®¾ç½®

#### 7.1.1 åç«¯è®¾ç½®
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥

# è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### 7.1.2 å‰ç«¯è®¾ç½®
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 7.2 æ•°æ®åº“è®¾ç½®

#### 7.2.1 PostgreSQL å®‰è£…ï¼ˆDockerï¼‰
```bash
docker run --name project-alpha-db \
  -e POSTGRES_USER=alpha_user \
  -e POSTGRES_PASSWORD=alpha_pass \
  -e POSTGRES_DB=project_alpha \
  -p 5432:5432 \
  -d postgres:16
```

#### 7.2.2 åˆå§‹æ•°æ®è¿ç§»
```bash
# åˆ›å»ºè¿ç§»è„šæœ¬
alembic revision --autogenerate -m "Initial migration"

# æ‰§è¡Œè¿ç§»
alembic upgrade head
```

### 7.3 æµ‹è¯•ç­–ç•¥

#### 7.3.1 åç«¯æµ‹è¯•
- å•å…ƒæµ‹è¯•ï¼šæµ‹è¯• Service å±‚ä¸šåŠ¡é€»è¾‘
- é›†æˆæµ‹è¯•ï¼šæµ‹è¯• API ç«¯ç‚¹
- æµ‹è¯•å·¥å…·ï¼špytest, pytest-asyncio

#### 7.3.2 å‰ç«¯æµ‹è¯•
- ç»„ä»¶æµ‹è¯•ï¼šä½¿ç”¨ Vitest + Testing Library
- E2E æµ‹è¯•ï¼šä½¿ç”¨ Playwrightï¼ˆå¯é€‰ï¼‰

### 7.4 éƒ¨ç½²æ–¹æ¡ˆ

#### 7.4.1 Docker éƒ¨ç½²
```dockerfile
# backend/Dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

```dockerfile
# frontend/Dockerfile
FROM node:20-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
```

#### 7.4.2 docker-compose.yml
```yaml
version: '3.8'

services:
  db:
    image: postgres:16
    environment:
      POSTGRES_USER: alpha_user
      POSTGRES_PASSWORD: alpha_pass
      POSTGRES_DB: project_alpha
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  backend:
    build: ./backend
    ports:
      - "8000:8000"
    environment:
      DATABASE_URL: postgresql://alpha_user:alpha_pass@db:5432/project_alpha
    depends_on:
      - db

  frontend:
    build: ./frontend
    ports:
      - "80:80"
    depends_on:
      - backend

volumes:
  postgres_data:
```

---

## 8. éåŠŸèƒ½æ€§éœ€æ±‚

### 8.1 æ€§èƒ½è¦æ±‚
- API å“åº”æ—¶é—´ï¼š< 200ms (P95)
- é¡µé¢é¦–æ¬¡åŠ è½½æ—¶é—´ï¼š< 2s
- æ”¯æŒè‡³å°‘ 1000 ä¸ªç¥¨åŠ¡çš„æµç•…æµè§ˆ

### 8.2 å®‰å…¨æ€§
- è™½ç„¶æ— éœ€ç”¨æˆ·è®¤è¯ï¼Œä½†éœ€è¦ï¼š
  - SQL æ³¨å…¥é˜²æŠ¤ï¼ˆä½¿ç”¨ ORM å‚æ•°åŒ–æŸ¥è¯¢ï¼‰
  - XSS é˜²æŠ¤ï¼ˆå‰ç«¯è¾“å‡ºè½¬ä¹‰ï¼‰
  - CSRF é˜²æŠ¤ï¼ˆå¦‚æœåç»­æ·»åŠ çŠ¶æ€ç®¡ç†ï¼‰
- è¾“å…¥éªŒè¯å’Œæ¸…ç†

### 8.3 å¯ç»´æŠ¤æ€§
- ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£
- ç»Ÿä¸€çš„ä»£ç é£æ ¼ï¼ˆESLint, Prettier, Black, flake8ï¼‰
- Git ç‰ˆæœ¬æ§åˆ¶
- æ¸…æ™°çš„æäº¤ä¿¡æ¯

### 8.4 å¯æ‰©å±•æ€§
- æ¨¡å—åŒ–è®¾è®¡ä¾¿äºåç»­æ·»åŠ åŠŸèƒ½
- é¢„ç•™ç”¨æˆ·è®¤è¯ç³»ç»Ÿæ¥å£
- æ”¯æŒå¤šè¯­è¨€å›½é™…åŒ–ï¼ˆi18nï¼‰å‡†å¤‡

### 8.5 æµè§ˆå™¨å…¼å®¹æ€§
- Chrome/Edge (æœ€æ–°ç‰ˆæœ¬)
- Firefox (æœ€æ–°ç‰ˆæœ¬)
- Safari (æœ€æ–°ç‰ˆæœ¬)
- ç§»åŠ¨æµè§ˆå™¨ï¼ˆiOS Safari, Chrome Mobileï¼‰

---

## 9. é¡¹ç›®é‡Œç¨‹ç¢‘

### Phase 1: åŸºç¡€æ¶æ„æ­å»ºï¼ˆWeek 1ï¼‰
- [ ] é¡¹ç›®åˆå§‹åŒ–ï¼ˆå‰åç«¯è„šæ‰‹æ¶ï¼‰
- [ ] æ•°æ®åº“è®¾è®¡ä¸è¿ç§»
- [ ] åŸºç¡€ API æ¡†æ¶æ­å»º
- [ ] å‰ç«¯åŸºç¡€ç»„ä»¶åº“é›†æˆ

### Phase 2: æ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ˆWeek 2-3ï¼‰
- [ ] ç¥¨åŠ¡ CRUD API å®ç°
- [ ] æ ‡ç­¾ CRUD API å®ç°
- [ ] ç¥¨åŠ¡-æ ‡ç­¾å…³è” API å®ç°
- [ ] å‰ç«¯ç¥¨åŠ¡åˆ—è¡¨é¡µé¢
- [ ] å‰ç«¯ç¥¨åŠ¡åˆ›å»º/ç¼–è¾‘åŠŸèƒ½

### Phase 3: é«˜çº§åŠŸèƒ½ï¼ˆWeek 4ï¼‰
- [ ] æ ‡ç­¾ç­›é€‰åŠŸèƒ½
- [ ] æœç´¢åŠŸèƒ½
- [ ] çŠ¶æ€åˆ‡æ¢åŠŸèƒ½
- [ ] å‰ç«¯äº¤äº’ä¼˜åŒ–

### Phase 4: æµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆWeek 5ï¼‰
- [ ] å•å…ƒæµ‹è¯•ç¼–å†™
- [ ] é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] UI/UX ä¼˜åŒ–

### Phase 5: éƒ¨ç½²ä¸æ–‡æ¡£ï¼ˆWeek 6ï¼‰
- [ ] Docker å®¹å™¨åŒ–
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] ç”¨æˆ·æ–‡æ¡£ç¼–å†™
- [ ] API æ–‡æ¡£ç”Ÿæˆ

---

## 10. é™„å½•

### 10.1 é¢„è®¾æ ‡ç­¾é¢œè‰²æ–¹æ¡ˆ
```javascript
const PRESET_COLORS = [
  { name: 'Red', value: '#EF4444' },
  { name: 'Orange', value: '#F97316' },
  { name: 'Amber', value: '#F59E0B' },
  { name: 'Yellow', value: '#EAB308' },
  { name: 'Lime', value: '#84CC16' },
  { name: 'Green', value: '#10B981' },
  { name: 'Emerald', value: '#059669' },
  { name: 'Teal', value: '#14B8A6' },
  { name: 'Cyan', value: '#06B6D4' },
  { name: 'Sky', value: '#0EA5E9' },
  { name: 'Blue', value: '#3B82F6' },
  { name: 'Indigo', value: '#6366F1' },
  { name: 'Violet', value: '#8B5CF6' },
  { name: 'Purple', value: '#A855F7' },
  { name: 'Fuchsia', value: '#D946EF' },
  { name: 'Pink', value: '#EC4899' },
  { name: 'Rose', value: '#F43F5E' }
];
```

### 10.2 TypeScript ç±»å‹å®šä¹‰ç¤ºä¾‹
```typescript
// types/ticket.ts
export enum TicketStatus {
  PENDING = 'pending',
  COMPLETED = 'completed'
}

export interface Tag {
  id: number;
  name: string;
  color: string;
  created_at: string;
}

export interface Ticket {
  id: number;
  title: string;
  description?: string;
  status: TicketStatus;
  tags: Tag[];
  created_at: string;
  updated_at: string;
}

export interface TicketFilters {
  status?: TicketStatus | 'all';
  tag_ids?: number[];
  search?: string;
}

export interface PaginatedResponse<T> {
  data: T[];
  total: number;
  page: number;
  page_size: number;
  total_pages: number;
}
```

### 10.3 API å®¢æˆ·ç«¯å°è£…ç¤ºä¾‹
```typescript
// api/tickets.ts
import axios from 'axios';

const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000/api/v1';

export const ticketsApi = {
  getTickets: (params: TicketFilters & { page?: number; page_size?: number }) =>
    axios.get<PaginatedResponse<Ticket>>(`${API_BASE_URL}/tickets`, { params }),
  
  getTicket: (id: number) =>
    axios.get<Ticket>(`${API_BASE_URL}/tickets/${id}`),
  
  createTicket: (data: TicketCreate) =>
    axios.post<Ticket>(`${API_BASE_URL}/tickets`, data),
  
  updateTicket: (id: number, data: TicketUpdate) =>
    axios.put<Ticket>(`${API_BASE_URL}/tickets/${id}`, data),
  
  deleteTicket: (id: number) =>
    axios.delete(`${API_BASE_URL}/tickets/${id}`),
  
  toggleStatus: (id: number) =>
    axios.patch<{ id: number; status: string; updated_at: string }>(`${API_BASE_URL}/tickets/${id}/toggle-status`),
  
  addTags: (id: number, tag_ids: number[]) =>
    axios.post<Ticket>(`${API_BASE_URL}/tickets/${id}/tags`, { tag_ids }),
  
  removeTag: (ticketId: number, tagId: number) =>
    axios.delete(`${API_BASE_URL}/tickets/${ticketId}/tags/${tagId}`)
};
```

### 10.4 ç¤ºä¾‹æ•°æ®
```json
// ç¤ºä¾‹ç¥¨åŠ¡æ•°æ®
[
  {
    "id": 1,
    "title": "ä¿®å¤ç™»å½•é¡µé¢æŒ‰é’®æ ·å¼",
    "description": "ç§»åŠ¨ç«¯æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œéœ€è¦è°ƒæ•´å“åº”å¼å¸ƒå±€",
    "status": "pending",
    "tags": [
      { "id": 1, "name": "bug", "color": "#EF4444" },
      { "id": 2, "name": "frontend", "color": "#3B82F6" }
    ]
  },
  {
    "id": 2,
    "title": "å®ç°æ•°æ®å¯¼å‡ºåŠŸèƒ½",
    "description": "æ”¯æŒ CSV å’Œ Excel æ ¼å¼",
    "status": "completed",
    "tags": [
      { "id": 3, "name": "feature", "color": "#10B981" },
      { "id": 4, "name": "backend", "color": "#8B5CF6" }
    ]
  }
]
```

---

## æ–‡æ¡£å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´è¯´æ˜ | ä½œè€… |
|------|------|----------|------|
| v1.0 | 2025-12-11 | åˆå§‹ç‰ˆæœ¬åˆ›å»º | - |

---

**æ–‡æ¡£ç»“æŸ**

